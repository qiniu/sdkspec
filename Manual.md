---
title: 使用指南 | 七牛云存储
---

# 使用指南


## 概述

七牛云存储主要托管客户的文件型数据（或者很学术地称之为非结构化数据），比如常见的富媒体如图片和音视频文件。七牛云存储的三大特性：

* 存储（托管用户的文件型数据）
* 传输加速（屏蔽网络复杂性，加速数据的上传和下载，并为恶劣网络环境提供断点续上传、续下载能力）
* 数据处理（针对常见的文件类型提供云端数据处理功能。比如为图片生成各种规格的缩略图、打水印，为音视频进行转码等）


## 资源型存储（rs）

从存储角度来说，首先需要理解的是：

* 七牛云存储不是结构化数据的存储（Database），而是文件型存储（或资源型存储：Resource Storage，简称RS）
* 七牛云存储不是文件系统型存储（File System Storage，简称FS），而是键值对存储（Key Value Storage，简称KV）

每个客户都可以在七牛云存储上创建若干个空间（英文叫Bucket，它有点类似数据库中Table）。每个客户能够创建的Bucket个数比较有限，比如20个。每个Bucket里面可以放任意多的文件，每个文件有一个键值（Key）。Key是用户自行指定的，可以是包含路径分隔符，比如像 a/b/c.doc, images/logo.png 这样。文件内容或其他信息都可以通过Key来获得。

尽管是KV存储，但因为Key可以是任意的路径（Path），所以七牛也可以达到一些文件系统所能够表达的效果。


## 上传文件

七牛云存储花了大量的精力来改善上传文件的体验。这主要表现在：

### 客户端直传

为了尽可能地改善终端用户的上传体验，七牛云存储首创了客户端直传功能。一般云存储的上传流程是：

    终端用户 => 业务服务器 => 云存储服务

这样多了一次上传的流程，和本地存储相比，会相对慢一些。但七牛引入了客户端直传，将整个上传过程调整为：

    终端用户 => 七牛 => 业务服务器

用户直接上传到七牛的服务器，通过DNS智能解析，七牛会选择到最近的最合适的ISP服务商节点，速度会比原先快很多。文件上传成功以后，七牛的服务器使用回调功能，只需要将非常少的数据（比如Key）传给应用服务器，应用服务器进行保存即可。

结合七牛的跨IDC式的分布式存储架构，引入客户端直传后上传文件到七牛不只不必本地存储慢，而且会比本地存储快很多。毕竟开发者自行做多IDC的上传加速，无论开发、运维还是硬件的成本都是很高的。

### 断点续上传

考虑到移动网络的网络质量低下（和固网相比）和不稳定性（上网设备在移动），考虑如何保证恶劣网络环境下仍然可以传输成功是非常有必要的。正是因为考虑了这一点，七牛云存储提供了断点续上传功能。也就是在上传失败的时候，不需要从头开始重新上传，只需要从失败的地方继续上传后续的数据。

### 分块并行上传

在网络质量比较好的时候，我们考虑如何尽可能吃满用户的带宽，加快上传速度。基于这样的想法，七牛云存储提供了分块并行上传的能力。
